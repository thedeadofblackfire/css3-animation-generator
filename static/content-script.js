'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};window.css3AnimationGenerator=function(){function a(){this.inited=!1}function b(g){return document.querySelector(g)}function c(){return(0|16777216*(1+Math.random())).toString(16).substring(1)}function d(g){var h=g.classList.length;if(h){for(var j,k=[],l=0;l<h;l++){if(j=g.classList.item(l),f.test(j))return'.'+j;k.push('.'+j)}return k.join('')}if(g.id)return'#'+g.id;var m=g.localName;if('body'===m||'html'===m)return m;if(g.parentNode){var n=d(g.parentNode);return n+'>'+m}return m}function e(g,h){var j='//cdn.bootcss.com/codemirror/5.25.0';return'object'===('undefined'==typeof chrome?'undefined':_typeof(chrome))&&chrome.extension&&(j=chrome.extension.getURL('static/codemirror5.25.0')),'\n<!DOCTYPE html>\n<html lang="zh-CN">\n<head>\n    <meta charset="utf-8">\n    <meta http-equiv="content-type" content="text/html; charset=utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />\n    <meta name="renderer" content="webkit">\n    <meta http-equiv="Cache-Control" content="no-siteapp" />\n    <meta name="apple-mobile-web-app-title" content="vace"/>\n    <meta name="format-detection" content="telephone=no" />\n    <meta name="msapplication-tap-highlight" content="no" />\n    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">\n    <title>VaceCss3Animation</title>\n</head>\n<body>\n<style>\n  *{padding: 0;margin: 0;}\n  html,body,.app{width: 100%;height: 100%;}\n  .app .CodeMirror{ height: 100%; }\n  .col{\n    width: 50%;float: left;box-sizing: border-box;\n    height: 100%;\n  }\n  .col-right{\n    border-left: 1px solid #9E9E9E;\n  }\n</style>\n<link href="'+j+'/codemirror.min.css" rel="stylesheet">\n<link href="'+j+'/addon/hint/show-hint.min.css" rel="stylesheet">\n<link href="'+j+'/theme/monokai.min.css" rel="stylesheet">\n<script charset="utf-8" src="'+j+'/codemirror.min.js"></script>\n<script charset="utf-8" src="'+j+'/addon/hint/show-hint.min.js"></script>\n<script charset="utf-8" src="'+j+'/mode/css/css.min.js"></script>\n<script charset="utf-8" src="'+j+'/addon/hint/css-hint.min.js"></script>\n<div class="app">\n<div class="col">\n  <textarea id="code" name="code">\n/* Export Animations */\n'+g+'\n  </textarea>\n</div>\n<div class="col col-right">\n  <textarea id="code1" name="code">\n/* export keyframes  */\n'+h+'\n  </textarea>\n</div>\n</div>\n\n<script charset="utf-8">\n  /* global CodeMirror */\n  CodeMirror.fromTextArea(document.getElementById("code"), {\n    extraKeys: {"Ctrl-Space": "autocomplete"},\n    theme:\'monokai\',\n    lineNumbers:true\n  });\n  CodeMirror.fromTextArea(document.getElementById("code1"), {\n    extraKeys: {"Ctrl-Space": "autocomplete"},\n    theme:\'monokai\',\n    lineNumbers:true\n  });\n</script>\n</body>\n</html>'}a.prototype={_init:function _init(){if(!this.inited){this.inited=!0,this.styles=[],this.keyframeIdCache=Object.create(null);var g=document.createElement('style'),h=document.createElement('style'),j=this.documentHead=document.head||b('head')||b('body');g.type=h.type='text/css',g.dataset.desc='Chrome Plugin > Css3Animation Element Style',h.dataset.desc='Chrome Plugin > Css3Animation Keyframes',j.appendChild(g),j.appendChild(h),this.styleAnimation=g,this.styleKeyframes=h}},add:function add(g,h,j,k,l,m){this._init(),this._addKeyframe(j,l);var n=this._getElementSelector(g),o=this.styles.find(function(p){return p.selector===n});o?(o.element=g,o.className=h,o.keyframeId=j,o.animation=k,o.options=m):this.styles.push({selector:n,element:g,className:h,keyframeId:j,animation:k,options:m}),this.render()},preview:function preview(g,h,j,k,l){this._init(),this._addKeyframe(h,k,l);var m=this._getElementSelector(g),o=document.createTextNode(m+'{animation:'+j+'}');this.styleAnimation.appendChild(o)},export:function _export(){this._init();var g=new Set,h=this.styles.map(function(l){g.add(l.keyframeId);var m=l.className||d(l.element);return m+'{animation:'+l.animation+'}'}).join('\n'),j=this.keyframeIdCache,k=Array.from(g).map(function(l){return j[l]||''}).join('\n');this._exportConsole(h,k),this._exportBlank(h,k)},getConfigByElment:function getConfigByElment(g){var h=g._unique;if(!h)return!1;var k=this.styles.find(function(l){return l.selector==='['+h+']'});return k.options},_exportBlank:function _exportBlank(g,h){var j=window.open();return j.document.title='css3-animation-generator',j.document.write(e(g,h)),j},_exportConsole:function _exportConsole(g,h){console.info(' ---- START EXPORT ANIMATION ---- '),console.group('export animations : '),console.log('\n\n/!* export by [css3-animation-generator] */\n'+g+'\n\n\n'),console.groupEnd(),console.group('export keyframes : '),console.log('\n\n\n'+h+'\n\n\n'),console.groupEnd(),console.info(' ---- ENDED EXPORT ANIMATION ---- ')},remove:function remove(g){this._init();var h=this._getElementSelector(g),j=this.styles.findIndex(function(k){return k.selector===h});return-1===j?'\u8BE5\u5143\u7D20\u4E0A\u672A\u8BBE\u7F6E\u52A8\u753B':(this.styles.splice(j,1),'\u5DF2\u7ECF\u79FB\u9664\u4E86\u5143\u7D20\u7684\u52A8\u753B')},_addKeyframe:function _addKeyframe(g,h){var j=this.keyframeIdCache;if(!j[g]){j[g]=h;var k=document.createTextNode(h);this.styleKeyframes.appendChild(k)}},_getElementSelector:function _getElementSelector(g){var h=g._unique;return h||(h='c3-'+c(),g._unique=h,g.setAttribute(h,'')),'['+h+']'},render:function render(){var g='',h=this.styles;h.forEach(function(k){g+=k.selector+'{animation:'+k.animation+'}'}),this.styleAnimation.innerText='';var j=this;setTimeout(function(){var k=document.createTextNode(g);j.styleAnimation.appendChild(k)})},replay:function replay(){this._init()}};var f=/^(c3|vp)\-/i;return new a}();
